name: nixos-compose
executables:
  nixos-compose:
    source-dirs: src
    main: Main.hs

tests:
  spec:
    source-dirs: [spec, src]
    main: Spec.hs
    dependencies:
      - hspec
      - hspec-discover
      - hspec-golden
      - ki
      - mockery
      - silently
      - temporary

ghc-options:
  - -O0
  - -threaded
  - -Weverything
  - -Wno-implicit-prelude
  - -Wno-missing-export-lists
  - -Wno-missing-import-lists
  - -Wno-missing-kind-signatures
  - -Wno-missing-local-signatures
  - -Wno-missing-safe-haskell-mode
  - -Wno-monomorphism-restriction
  - -Wno-name-shadowing
  - -Wno-partial-fields
  - -Wno-prepositive-qualified-module
  - -Wno-unsafe
  - -Wno-unused-packages

default-extensions:
  - DeriveAnyClass
  - DeriveGeneric
  - DerivingStrategies
  - DuplicateRecordFields
  - GeneralizedNewtypeDeriving
  - ImportQualifiedPost
  - InstanceSigs
  - LambdaCase
  - NamedFieldPuns
  - NumericUnderscores
  - OverloadedLabels
  - OverloadedStrings
  - PackageImports
  - QuasiQuotes
  - RankNTypes
  - ScopedTypeVariables
  - TupleSections
  - TypeSynonymInstances
  - ViewPatterns

dependencies:
  - aeson
  - ansi-terminal
  - base
  - bytestring
  - containers
  - cradle
  - directory
  - filelock
  - filepath
  - generic-lens
  - interpolate
  - ip
  - lens
  - optparse-applicative
  - port-utils
  - process
  - safe-exceptions
  - string-conversions
  - strip-ansi-escape
  - text
  - unix
